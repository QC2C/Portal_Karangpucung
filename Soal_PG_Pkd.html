<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Soal Pilihan Ganda - Stasiun Karangpucung</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 20px;
      background: #f2f2f2;
    }
    .container {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      max-width: 800px;
      margin: auto;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo {
      height: 50px;
    }
    .title {
      text-align: center;
      font-size: 20px;
      font-weight: bold;
    }
    .identity {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin: 16px 0;
    }
    .identity input {
      flex: 1;
      padding: 8px;
      font-size: 14px;
      font-family: 'Poppins', sans-serif;
      font-weight: bold;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    .question {
      margin: 20px 0;
    }
    .question p {
      font-weight: 600;
    }
    .option {
      margin: 5px 0;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ddd;
      cursor: pointer;
      transition: background 0.3s;
    }
    .option:hover {
      background: #ffa72633;
    }
    .option input[type="radio"] {
      margin-right: 10px;
    }
    .option img {
      height: 60px;
      vertical-align: middle;
      margin-left: 10px;
    }
    .hasil {
      display: none;
      font-weight: bold;
      margin-top: 20px;
      text-align: center;
      padding: 10px;
      background: #e3f2fd;
      border-radius: 8px;
    }
    button {
      background: #ff6f00;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      margin-top: 20px;
    }
    .question div.result {
      margin-top: 8px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container" id="quiz">
    <div class="header">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Danantara_Indonesia.svg/2560px-Danantara_Indonesia.svg.png" class="logo" alt="Logo KAI">
      <div class="title">STASIUN KARANGPUCUNG</div>
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Logo_PT_Kereta_Api_Indonesia_%28Persero%29_2020.svg/1200px-Logo_PT_Kereta_Api_Indonesia_%28Persero%29_2020.svg.png" class="logo" alt="Logo Dana">
    </div>

    <div class="identity">
      <input type="text" placeholder="Nama" id="nama">
      <input type="text" placeholder="NIPP" id="nipp">
      <input type="text" placeholder="Jabatan" id="jabatan">
    </div>

    <!-- Soal 1–10 sudah ada dalam file sebelumnya dan tidak diubah. Tambahkan soal jika perlu -->
    <div class="question">
      <p>1. Gambar di samping adalah?</p>
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Semboyan_21.jpg/1200px-Semboyan_21.jpg" style="height: 100px; float: right; margin-left: 15px;">
      <div class="option"><input type="radio" name="q1" value="a"> a. Semboyan 30</div>
      <div class="option"><input type="radio" name="q1" value="b"> b. Semboyan 31</div>
      <div class="option"><input type="radio" name="q1" value="c"> c. Semboyan 20</div>
      <div class="option"><input type="radio" name="q1" value="d"> d. Semboyan 21</div>
    </div>

      <div class="question">
      <p>2. Dibawah ini marka lokasi yaitu:</p>
      <div class="option"><input type="radio" name="q2" value="a"> a. <img src="https://upload.wikimedia.org/wikipedia/id/c/c5/Semboyan_10H_PD3.jpg"></div>
      <div class="option"><input type="radio" name="q2" value="b"> b. <img src="https://hendriyana90.wordpress.com/wp-content/uploads/2013/04/download10.jpg"></div>
      <div class="option"><input type="radio" name="q2" value="c"> c. <img src="https://upload.wikimedia.org/wikipedia/id/e/e1/Semboyan_10L_PD3.jpg"></div>
      <div class="option"><input type="radio" name="q2" value="d"> d. <img src="https://upload.wikimedia.org/wikipedia/id/7/79/Semboyan_10K_PD3.jpg"></div>
    </div>

    <div class="question">
  <p>3. Siapakah yang harus mengetahui makna dan mematuhi setiap Semboyan.?</p>
  <div class="option"><input type="radio" name="q3" value="a"> a. KS / PPKA</div>
  <div class="option"><input type="radio" name="q3" value="b"> b. Semua Petugas yang melakukan pekerjaan berkaitan dengan keamanan dan keselamatan perjalanan Kereta Api dan langsiran </div>
  <div class="option"><input type="radio" name="q3" value="c"> c. Petugas yang berkaitan dengan urusan prasarana seperti JJ dan Sintel</div>
  <div class="option"><input type="radio" name="q3" value="d"> d. Semua petugas yang berada di lingkungan Stasiun</div>
</div>

<div class="question">
  <p>4. Arti dari gambar  di samping adalah?</p>
  <img src="https://upload.wikimedia.org/wikipedia/commons/b/b9/Semboyan_10J.jpg" alt="Gambar Pertanyaan" style="height: 180px; float: right; margin-left: 15px;">
  <div class="option"><input type="radio" name="q4" value="a"> a. KA akan menghadapi turunanan</div>
  <div class="option"><input type="radio" name="q4" value="b"> b. KA akan menghadapi tanjakan</div>
  <div class="option"><input type="radio" name="q4" value="c"> c. KA akan menghadapi lurusan</div>
  <div class="option"><input type="radio" name="q4" value="d"> d. KA akan berhenti</div>
</div>

<div class="question">
  <p>5. Makna dari semboyan di samping adalah?</p>
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7a/Semboyan_2.svg/2048px-Semboyan_2.svg.png" alt="Gambar Pertanyaan" style="height: 180px; float: right; margin-left: 15px;">
  <div class="option"><input type="radio" name="q5" value="a"> a. Kecepatan KA tidak boleh melebihi 60 kpj </div>
  <div class="option"><input type="radio" name="q5" value="b"> b. Kecepatan KA tidak boleh melebihi 6 kpj</div>
  <div class="option"><input type="radio" name="q5" value="c"> c. Kecepatan KA tidak boleh melebihi 0,6 kpj</div>
  <div class="option"><input type="radio" name="q5" value="d"> d. Kecepatan KA tidak boleh melebihi 600 kpj</div>
</div>

<div class="question">
  <p>6. Visi KAI saat ini adalah?</p>
  <div class="option"><input type="radio" name="q6" value="a"> a. Menggerakkan transportasi berkelanjutan, meningkatkan kualitas hidup masyarakat </div>
  <div class="option"><input type="radio" name="q6" value="b"> b. Menyediakan jasa yang mengedepankan keselamatan, ketepatan waktu dan kenyamanan</div>
  <div class="option"><input type="radio" name="q6" value="c"> c. Mengembangkan sumber daya dan teknologi dengan mengedepankan ESG</div>
  <div class="option"><input type="radio" name="q6" value="d"> d. Berperan aktif dalam pengembangan transportasi antarmoda berkelanjutan bersama pemangku kepentingan</div>
</div>

<div class="question">
  <p>7. Nilai-nilai utama PT KAI adalah?</p>
  <div class="option"><input type="radio" name="q7" value="a"> a. AQIDAH </div>
  <div class="option"><input type="radio" name="q7" value="b"> b. BUMN</div>
  <div class="option"><input type="radio" name="q7" value="c"> c. 5R</div>
  <div class="option"><input type="radio" name="q7" value="d"> d. AKHLAK</div>
</div>

<div class="question">
  <p>8. Amanah adalah?</p>
  <div class="option"><input type="radio" name="q8" value="a"> a. Peduli terhadap lingkungan kerja </div>
  <div class="option"><input type="radio" name="q8" value="b"> b. Berdedikasi dan mengutamakan kepentingan bangsa dan negara</div>
  <div class="option"><input type="radio" name="q8" value="c"> c. Memegang teguh kepercayaan yang diberikan</div>
  <div class="option"><input type="radio" name="q8" value="d"> d. Patuh pada prosedur kerja</div>
</div>

<div class="question">
  <p>9. Loyal adalah?</p>
  <div class="option"><input type="radio" name="q9" value="a"> a. Peduli terhadap lingkungan kerja </div>
  <div class="option"><input type="radio" name="q9" value="b"> b. Berdedikasi dan mengutamakan kepentingan bangsa dan negara</div>
  <div class="option"><input type="radio" name="q9" value="c"> c. Memegang teguh kepercayaan yang diberikan</div>
  <div class="option"><input type="radio" name="q9" value="d"> d. Patuh pada prosedur kerja</div>
</div>

<div class="question">
  <p>10. Kompeten adalah?</p>
  <div class="option"><input type="radio" name="q10" value="a"> a. Peduli terhadap lingkungan kerja </div>
  <div class="option"><input type="radio" name="q10" value="b"> b. Terus belajar dan mengembangkan kapabilitas</div>
  <div class="option"><input type="radio" name="q10" value="c"> c. Memegang teguh kepercayaan yang diberikan</div>
  <div class="option"><input type="radio" name="q10" value="d"> d. Patuh pada prosedur kerja</div>
</div>
    <!-- Tombol -->
    <button onclick="selesaiKuis()">Hasil Nilai</button>
    <div class="hasil" id="hasil"></div>
    <button onclick="cetakPDF()">Save as PDF</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    function selesaiKuis() {
      const jawabanBenar = {
        q1: 'd',
        q2: 'd',
        q3: 'b',
        q4: 'b',
        q5: 'a',
        q6: 'a',
        q7: 'd',
        q8: 'c',
        q9: 'b',
        q10: 'b'
      };

      let skor = 0;
      let totalSoal = 10;

      for (let i = 1; i <= totalSoal; i++) {
        const jawaban = document.querySelector(`input[name="q${i}"]:checked`);
        const semuaPilihan = document.querySelectorAll(`input[name="q${i}"]`);
        const questionDiv = semuaPilihan[0].closest('.question');
        const indikatorLama = questionDiv.querySelector('.result');
        if (indikatorLama) indikatorLama.remove();

        const hasil = document.createElement('div');
        hasil.classList.add('result');

        if (jawaban && jawaban.value === jawabanBenar[`q${i}`]) {
          skor += 1;
          hasil.style.color = 'green';
          hasil.textContent = '✅ Jawaban Benar';
        } else {
          hasil.style.color = 'red';
          hasil.textContent = '❌ Jawaban Salah';
        }

        questionDiv.appendChild(hasil);
      }

      const nilaiAkhir = (skor / totalSoal) * 100;
      const hasilBox = document.getElementById('hasil');
      hasilBox.innerText = `Total Nilai Anda: ${nilaiAkhir}`;
      hasilBox.style.display = 'block';
    }

    function cetakPDF() {
      const { jsPDF } = window.jspdf;
      const quizElement = document.getElementById("quiz");
      const tombol = document.querySelectorAll('button');

      tombol.forEach(btn => btn.style.visibility = 'hidden');

      const namaPeserta = document.getElementById('nama').value.trim() || "hasil-kuis";
      const nilaiText = document.getElementById('hasil').innerText || "Tanpa_Nilai";
      const nilaiAkhir = nilaiText.replace(/[^0-9]/g, '');
      const dateNow = new Date().toLocaleString('id-ID');

      window.scrollTo(0, 0);

      html2canvas(quizElement, { useCORS: true, scale: 2 }).then(canvas => {
        const imgData = canvas.toDataURL("image/png");
        const pdf = new jsPDF({ orientation: 'portrait', unit: 'mm', format: 'a4' });

        const pageWidth = pdf.internal.pageSize.getWidth();
        const pageHeight = pdf.internal.pageSize.getHeight();
        const imgWidth = pageWidth;
        const imgHeight = canvas.height * imgWidth / canvas.width;

        if (imgHeight < pageHeight) {
          pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
        } else {
          let heightLeft = imgHeight;
          let page = 0;
          while (heightLeft > 0) {
            const sourceY = page * pageHeight * canvas.width / pageWidth;
            const pageCanvas = document.createElement('canvas');
            pageCanvas.width = canvas.width;
            pageCanvas.height = canvas.width * pageHeight / pageWidth;
            const ctx = pageCanvas.getContext('2d');
            ctx.drawImage(canvas, 0, sourceY, canvas.width, pageCanvas.height, 0, 0, canvas.width, pageCanvas.height);
            const pageImgData = pageCanvas.toDataURL("image/png");

            if (page > 0) pdf.addPage();
            pdf.addImage(pageImgData, 'PNG', 0, 0, imgWidth, pageHeight);
            heightLeft -= pageHeight;
            page++;
          }
        }

        pdf.setFontSize(10);
        pdf.text(`Dicetak pada: ${dateNow}`, 10, 290);

        const fileName = `nilai_hasil_${namaPeserta.replace(/\s+/g, '_')}_${nilaiAkhir}.pdf`;
        pdf.save(fileName);

        tombol.forEach(btn => btn.style.visibility = 'visible');
      });
    }

    document.querySelectorAll('.option').forEach(opt => {
      opt.addEventListener('click', () => {
        const input = opt.querySelector('input[type="radio"]');
        if (input) input.checked = true;
      });
    });
  </script>
</body>
</html>
